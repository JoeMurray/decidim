<% add_decidim_page_title(t(".meetings")) %>

<% content_for :css_content do %>
  <%= stylesheet_pack_tag "decidim_meetings", media: "all" %>
<% end %>

<% content_for :js_content do %>
  <%= javascript_pack_tag "decidim_meetings" %>
<% end %>

<% content_for :aside do %>
  <h1 class="h3 md:h1 decorator"><%= t("decidim.components.meetings.name") %></h1>

  <%= render partial: "filters" %>

  <%= render partial: "decidim/meetings/calendar_modal", locals: {
    path: short_url(
      route_name: "calendar",
      params: { filter: params.fetch(:filter, {}).try(:to_unsafe_hash) }
    )
  } %>
<% end %>

<%= render layout: "layouts/decidim/shared/layout_two_col" do %>

  <div class="meeting__map">
    <%= cell "decidim/meetings/meetings_map", search.result %>
  </div>

  <%# REDESIGN_PENDING: Add new route %>
  <a href="" class="meeting__link">
    <%= "See the full calendar" %>
    <%= icon "calendar-2-line", class: "fill-current" %>
  </a>

  <div id="meetings">
    <%= render partial: "meetings" %>
  </div>

  <%# REDESIGN_PENDING: Move this partial to the actual route %>
  <%= render partial: "calendar" %>
<% end %>
