<% verification = capture do %>
  <%= icon auth_icon || "login-circle-line", class: "verification__icon#{ ' is-granted' if local_assigns[:is_granted].present? }" %>
  <div class="verification__text">
    <h2 class="h5 text-secondary">
      <%= title %>
    </h2>
    <span>
      <%= explanation %>
    </span>
  </div>
  <% if local_assigns[:is_granted].present? %>
    <%= icon "refresh-line", class: "w-6 h-6 flex-none text-secondary fill-current" %>
  <% else %>
    <%= icon "arrow-right-s-line", class: "w-6 h-6 flex-none text-secondary fill-current" %>
  <% end %>
<% end %>

<% if local_assigns[:url].present? %>
  <a data-verification href="<%= url %>" class="verification" title="<%= button_text %>">
    <%= verification %>
  </a>
<% else %>
  <%= content_tag redesign_enabled? ? :div : :button, class: "verification", data_modal_open_key => "renew-modal", data_modal_remote_key => remote_url, data: { verification: "" } do %>
    <%= verification %>
  <% end %>
  <%= decidim_modal id: "renew-modal", class:"verification-modal", remote: true if remote_url %>
<% end %>
