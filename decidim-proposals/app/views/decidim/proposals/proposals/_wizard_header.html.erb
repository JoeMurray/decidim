<div class="flex justify-center">
  <h1 class="h1 decorator my-12">
    <%= proposal_wizard_step_title action_name %>
    <%= "(#{@similar_proposals.count})" if @similar_proposals.present? %>
  </h1>
</div>

<ol id="wizard-steps" class="proposal__wizard">
  <% proposal_wizard_steps.each do |wizard_step| %>
    <%
      scope = "decidim.proposals.proposals.wizard_steps"
      attributes = @step == wizard_step ? { "aria-current": "step", "aria-label": "#{t("current_step", scope:)}: #{t(wizard_step, scope:)}" } : {} %>
    <%= content_tag :li, t(wizard_step, scope:), attributes %>
  <% end %>
</ol>

<% if @step == :step_4 %>
    <% body_messages = [t("decidim.proposals.proposals.preview.announcement_body")]
    if component_settings.proposal_edit_time == "limited"
      body_messages << t("decidim.proposals.proposals.preview.proposal_edit_before_minutes", count: component_settings.proposal_edit_before_minutes)
    end %>

  <%= cell(
    "decidim/announcement",
    {
      title: t("decidim.proposals.proposals.preview.announcement_title"),
      body: body_messages
    },
    callout_class: "warning"
  ) %>
<% else %>
  <%= cell("decidim/announcement", component_settings.new_proposal_help_text) %>
<% end %>

<% if proposal_wizard_step_help_text?(@step) %>
  <% callout_step_help_text_class ||= nil %>
  <%= cell(
    "decidim/announcement",
    component_settings.try("proposal_wizard_#{@step}_help_text"),
    callout_class: callout_step_help_text_class,
    id: "proposal_wizard_help_text"
  ) %>
<% end %>
